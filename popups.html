<script src="https://cdn.jsdelivr.net/npm/js-cookie@2.2.1/src/js.cookie.min.js"></script>
<script>
  ready( function() {
    handleModals();
  });

  function ready( callback ) {
    if (document.readyState != 'loading') callback();
    else if (document.addEventListener) document.addEventListener('DOMContentLoaded', callback);
    else document.attachEvent('onreadystatechange', function() {
      if (document.readyState == 'complete') callback();
    });
  }

  function handleModals() {
    const modals = document.querySelectorAll( '.modal__outer' );
    if ( ! modals ) {
      return;
    }
    for ( const modal of modals ) {
      let button = modal.querySelectorAll( '.modal__close' )[0];
      button.addEventListener( 'click', function() {
        modal.classList.remove( 'opened' );
      });
    }
  }
</script>

<style>
.modal:last-child {
	background-color: #D6226A;
}
.modal__list {
  position: fixed;
  bottom: 0;
  left: 0;
  z-index: 1000000;
  width: 100%;
  transition: all 350ms;
  /* opacity: 0;
  visibility: hidden; */
}
/* .modal__overlay {
	position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(255,255,255,0.7);
} */
.modal {
  position: relative;
  /* top: 50%;
  left: 50%;
  width: 50%;
  max-width: 630px;
  min-width: 320px;
  height: auto; */
  z-index: 2000000;
  /* transform: translateX(-50%) translateY(-50%); */
  transition: all 350ms;
  opacity: 0;
  visibility: hidden;
}
/* .modal__list.opened {
	opacity: 1;
  visibility: visible;
} */
.modal.opened {
	opacity: 1;
	visibility: visible;
}
.modal__close {
	cursor: pointer;
}
</style>


<script>
  ready( function() {
    setModalCookie();
  });

  function ready( callback ) {
    if (document.readyState != 'loading') callback();
    else if (document.addEventListener) document.addEventListener('DOMContentLoaded', callback);
    else document.attachEvent('onreadystatechange', function() {
      if (document.readyState == 'complete') callback();
    });
  }

  function setModalCookie() {
    if ( Cookies.get( 'alert-{{wf {&quot;path&quot;:&quot;slug&quot;,&quot;type&quot;:&quot;PlainText&quot;\} }}' ) === undefined ) {
      // delay of 7 seconds
      setTimeout( function() {
        // document.querySelectorAll( '.modal' )[0].classList.add('opened');
        let modal = document.getElementById( 'modal-{{wf {&quot;path&quot;:&quot;slug&quot;,&quot;type&quot;:&quot;PlainText&quot;\} }}' )[0];
        modal.classList.add( 'opened' );
        // cookie expires in 7 days
        Cookies.set( 'alert-{{wf {&quot;path&quot;:&quot;slug&quot;,&quot;type&quot;:&quot;PlainText&quot;\} }}', true, { expires: 7 } );
      }, 7000);
    }
  }
</script>
